var re=Object.defineProperty,de=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var D=(e,t,i)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,c=(e,t)=>{for(var i in t||(t={}))ce.call(t,i)&&D(e,i,t[i]);if(O)for(var i of O(t))_e.call(t,i)&&D(e,i,t[i]);return e},h=(e,t)=>de(e,le(t));import{v,c as ue,E as pe,a as g,b as y,r as w,o as _,d as u,t as I,n as T,e as M,m as W,f as F,g as me,F as L,h as $,i as z,w as j,j as he,T as ge,k as fe,l as ve,p as we,q as Ae}from"./vendor.8fa25795.js";const Ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}};Ee();const xe=()=>({started:"yes"}),ye={},Ce={},be={};var $e={actions:Ce,mutations:be,state:xe,getters:ye};const P="activate_area",V="move_area",B="deactivate_area",G="resizing_AREA",U="update_list",J="window_was_resized",Z="READJUST_AREAS",q="fold_card",X="update_cards",K="resizing_toggle",H="read_json",k="area_toggle",Q="rearrange_area",Y="set_list",ee="resize_area",te="recalibrate_sizes",ie="redistribute_areas",ne="set_card_fold",se="set_cards",oe="set_resizing",ae="parse_json",Re=()=>({resizing:!1,list:[],originalList:[{name:"Area 1",original_position:1,current_position:1,id:1,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!1,cards:[{title:"Card A",content:"Card A",id:v(),fold_status:!1},{title:"Card B",content:"Card B",id:v(),fold_status:!1},{title:"Card C",content:"Card C",id:v(),fold_status:!1}]},{name:"Area 2",original_position:2,current_position:3,id:2,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!1},{name:"Area 3",original_position:3,current_position:3,id:3,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!0},{name:"Area 4",original_position:4,current_position:4,id:4,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!1},{name:"Area 5",original_position:5,current_position:5,id:5,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!1,image:"https://i.imgur.com/GL7igry.png"}],json:""}),Se={},Ie={[H]({commit:e},t){e(ae,t)},[K]({commit:e},t){e(oe,t)},[X]({commit:e},{areaId:t,cards:i}){e(se,{areaId:t,cards:i})},[q]({commit:e},{areaId:t,id:i,status:o}){e(ne,{areaId:t,id:i,status:o})},[P]({commit:e},t=null){let i=null;return typeof t=="number"?e(k,{areaId:t,show:!0}):i="`areaId` needs to be a number.",i},[B]({commit:e},t=null){let i=null;return typeof t=="number"?e(k,{areaId:t,show:!1}):i="`areaId` needs to be a number.",i},[V]({commit:e},{oldIndex:t,newIndex:i}){e(Q,{oldIndex:t,newIndex:i})},[U]({commit:e},t){e(Y,t)},[G]({commit:e},{id:t,sizeDiff:i}){e(ee,{id:t,sizeDiff:i})},[J]({commit:e}){e(te)},[Z]({commit:e}){e(ie)}},Te=e=>e.map(t=>{const i=window.innerWidth;return t.pixel_width===0&&(t.pixel_width=100),t.width=t.pixel_width/i*100,c({},t)}),A=e=>{let t=e.map(i=>{const{original_position:o,current_position:s,is_active:n,width:a,pixel_width:r,hasEditor:d=!1,image:l=null,id:C,cards:p=null}=i,m={id:C,original_position:o,current_position:s,is_active:n,width:a,pixel_width:r,hasEditor:d,image:l};return p&&(m.cards=p.map((R,S)=>h(c({},R),{position:S+1}))),m});return t=t.reduce((i,o)=>(i[`area${o.id}`]=o,i),{}),JSON.stringify(t)},ze={[ae](e,t){const i=JSON.parse(t),o=Object.entries(i).map(([,s])=>h(c({},s),{uid:v()}));e.json=t,e.list=o,console.log("file: areas.module.js | line 203 | parsed",o)},[oe](e,t){e.resizing=t},[k](e,{areaId:t,show:i}){const{originalList:o,list:s}=e;let n=s;if(i===!0){const r=o.find(p=>p.id===t),l=parseFloat((100/(n.length+1)).toFixed(2)),C=100-l;if(n=n.map(p=>{const m=parseFloat((C*p.width/100).toFixed(2));return h(c({},p),{width:m})}),r.is_active=!0,r.width=l,r.original_position<n.length)n.splice(r.original_position-1,0,r);else{let p=-1;for(let m=0;m<length;m+=1)n[m].original_position>r.original_position&&m>0&&n[m].original_position<n[m-1].original_position&&(p=m);p!==-1?n.splice(p,0,r):n.push(r)}}else{e.originalList=o.map(d=>h(c({},d),{is_active:d.id===t?!1:d.is_active,uid:v()})),n=s.filter(d=>d.id!==t);const r=n.reduce((d,l)=>d+l.width,0);n=n.map(d=>h(c({},d),{width:d.width/r*100}))}const a=window.innerWidth;n=n.map((r,d)=>h(c({},r),{current_position:d+1,pixel_width:a/(100/r.width)})),e.list=n,e.json=A(e.list)},[ee](e,{id:t,sizeDiff:i}){const{list:o}=e,s=o.findIndex(a=>a.id===t);o[s].pixel_width+=i,o[s+1].pixel_width-=i;const n=Te(o);e.list=n,e.json=A(e.list)},[Q](e){const{list:t}=e;e.list=t.map((i,o)=>h(c({},i),{current_position:o+1})),e.json=A(e.list)},[Y](e,t){e.list=t.map((i,o)=>h(c({},i),{current_position:o+1})),e.json=A(e.list)},[te](e){const t=window.innerWidth;e.list=e.list.map((i,o)=>h(c({},i),{current_position:o+1,pixel_width:t/(100/i.width)})),e.json=A(e.list)},[ie](e){const i=parseFloat((100/e.list.length).toFixed(2)),o=window.innerWidth;e.list=e.list.map((s,n)=>h(c({},s),{current_position:n+1,width:i,pixel_width:o/(100/i)})),e.json=A(e.list)},[ne](e,{areaId:t,id:i,status:o}){const s=e.list.findIndex(a=>a.id===t),n=e.list[s].cards.findIndex(a=>a.id===i);e.list[s].cards[n].fold_status=o,e.json=A(e.list)},[se](e,{areaId:t,cards:i}){const o=e.list.findIndex(s=>s.id===t);e.list[o].cards=i,e.json=A(e.list)}};var Le={state:Re,actions:Ie,getters:Se,mutations:ze},je=ue({modules:{base:$e,areas:Le}}),E=(e,t)=>{const i=e.__vccOpts||e;for(const[o,s]of t)i[o]=s;return i};const ke={name:"TinyEditor",components:{editor:pe}},We={style:{width:"90%"}};function Fe(e,t,i,o,s,n){const a=w("editor",!0);return _(),g("div",We,[y(a,{"api-key":"no-api-key",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |            alignleft aligncenter alignright alignjustify |            bullist numlist outdent indent | removeformat | help"}})])}var Ne=E(ke,[["render",Fe]]);const Oe={name:"AreaCard",props:{card:Object},data(){return{collapsed:!1}},methods:{collapse(){this.$emit("fold",{id:this.card.id,status:!this.card.fold_status})}}},De={class:"card"},Me={class:"card__header"},Pe={class:"card__draggable"};function Ve(e,t,i,o,s,n){return _(),g("div",De,[u("div",Me,[u("span",Pe,"\u2630 "+I(i.card.title),1),u("span",{class:"card__fold",onClick:t[0]||(t[0]=(...a)=>n.collapse&&n.collapse(...a))},"\u2193")]),u("div",{class:T(["card__content",i.card.fold_status?"card__content--hide":""])},I(i.card.content),3)])}var Be=E(Oe,[["render",Ve]]);const Ge={name:"AreaComponent",data(){return{area:null,containerWidth:0,cards:[]}},components:{Editor:Ne,Card:Be,draggable:M},props:{element:Object},computed:c({},W({list:({areas:e})=>e.list,resizing:({areas:e})=>e.resizing})),mounted(){this.area=document.getElementById(`area-${this.element.id}`),this.cards=this.element.cards},methods:h(c({},F({deActivateArea:B,resizeArea:G,foldCard:q,updateCards:X,isResizing:K})),{downMouse(e){var t=document.getElementsByClassName("tox-tinymce");for(let f=0;f<t.length;f++)t[f].style.pointerEvents="none";const{target:i,pageX:o}=e;this.isResizing(!0);let s=i.parentElement;const{addEventListener:n,removeEventListener:a}=window;let{offsetWidth:r}=s;const d=this.list[this.list.findIndex(f=>f.id===this.element.id)+1],l=document.getElementById(`area-${d.id}`),C=l.offsetWidth;let p=0;const m=(f,b=0)=>{let x=f+b;const N=C-b;N>100&&x>=100&&(l.style.width=N+"px",p=s.style.width=x+"px")},R=({pageX:f})=>{m(r,f-o)},S=()=>{setTimeout(()=>{this.isResizing(!1);var b=document.getElementsByClassName("tox-tinymce");for(let x=0;x<b.length;x++)b[x].style.pointerEvents="auto"},500);const f=parseFloat(p.replace("px",""));this.resizeArea({id:this.element.id,sizeDiff:f-r}),a("mousemove",R),a("mouseup",S)};n("mousemove",R),n("mouseup",S)},cardsMoved(){this.updateCards({areaId:this.element.id,cards:this.cards})},cardFold({id:e,status:t}){this.foldCard({areaId:this.element.id,id:e,status:t})}})},Ue=["id"],Je=u("div",{class:"area__handle"},[u("i",{class:"icon icon__move"},"\u2725")],-1),Ze={class:"area__close"},qe=u("hr",null,null,-1),Xe=u("hr",null,null,-1),Ke=["src"];function He(e,t,i,o,s,n){const a=w("Editor"),r=w("Card"),d=w("draggable");return _(),g("div",{class:"area",id:`area-${i.element.id}`,style:he(`width:${i.element.pixel_width}px`)},[u("div",{class:T(["area__header",e.resizing?"no-events":""])},[Je,u("div",Ze,[u("i",{class:"icon icon__close",onClick:t[0]||(t[0]=l=>e.deActivateArea(i.element.id))},"\xD7")])],2),u("div",{class:T(["area__content",e.resizing?"no-events":""])},[me(" Area "+I(i.element.id)+" ",1),i.element.hasEditor?(_(),g(L,{key:0},[qe,y(a)],64)):$("",!0),i.element.image?(_(),g(L,{key:1},[Xe,u("img",{class:"area__image",src:i.element.image,alt:"Image"},null,8,Ke)],64)):$("",!0),i.element.cards&&i.element.cards.length>0?(_(),z(d,{key:2,onChange:n.cardsMoved,modelValue:s.cards,"onUpdate:modelValue":t[1]||(t[1]=l=>s.cards=l),tag:"transition-group","item-key":"id",handle:".card__draggable"},{item:j(({element:l})=>[(_(),z(r,{onFold:n.cardFold,card:l,key:l.id},null,8,["onFold","card"]))]),_:1},8,["onChange","modelValue"])):$("",!0)],2),e.list.findIndex(l=>l.id===i.element.id)+1!==e.list.length?(_(),g("div",{key:0,class:"area__divider",onMousedown:t[2]||(t[2]=(...l)=>n.downMouse&&n.downMouse(...l))},null,32)):$("",!0)],12,Ue)}var Qe=E(Ge,[["render",He]]);const Ye={name:"WindowComponent",data:()=>({}),components:{Area:Qe,draggable:M},created(){window.onresize=this.windowResized},computed:{list:{get(){return this.$store.state.areas.list.filter(e=>e.is_active)},set(e){this.$store.dispatch(U,e)}}},methods:c({},F({moveArea:V,windowResized:J}))},et={class:"window"};function tt(e,t,i,o,s,n){const a=w("Area"),r=w("draggable");return _(),g("div",et,[y(r,{onChange:e.moveArea,handle:".area__handle",modelValue:n.list,"onUpdate:modelValue":t[0]||(t[0]=d=>n.list=d),tag:"transition-group","item-key":"uid"},{item:j(({element:d})=>[(_(),z(ge,{key:d.uid},{default:j(()=>[d?(_(),z(a,{key:d.uid,element:d},null,8,["element"])):$("",!0)]),_:2},1024))]),_:1},8,["onChange","modelValue"])])}var it=E(Ye,[["render",tt]]);const nt={name:"FooterComponent",methods:h(c({},F({activateArea:P,readjust:Z})),{addArea(e){const{target:t}=e,i=t.getAttribute("data-area-id");this.activateArea(parseInt(i,10))}}),computed:c({jsonText:{get(){return this.$store.state.areas.json},set(e){console.log("file: Footer.vue | line 43 | set | value",e),this.$store.dispatch(H,e)}}},W({list:({areas:e})=>e.originalList}))},st={class:"footer"},ot=["disabled","data-area-id"];function at(e,t,i,o,s,n){return _(),g("footer",st,[(_(!0),g(L,null,fe(e.list,a=>(_(),g("button",{key:a.id,class:T(["footer__btn",a.is_active?"footer__btn--disabled":""]),disabled:a.is_active,onClick:t[0]||(t[0]=(...r)=>n.addArea&&n.addArea(...r)),"data-area-id":a.id}," Add Area "+I(a.id),11,ot))),128)),ve(u("textarea",{name:"config",id:"config",cols:"30",rows:"5","onUpdate:modelValue":t[1]||(t[1]=a=>n.jsonText=a)},`
    `,512),[[we,n.jsonText]]),u("button",{class:"footer__btn",onClick:t[2]||(t[2]=(...a)=>e.readjust&&e.readjust(...a))},"Adjust Structure")])}var rt=E(nt,[["render",at]]);const dt={name:"MainComponent",components:{Window:it,Footer:rt}};function lt(e,t,i,o,s,n){const a=w("Window"),r=w("Footer");return _(),g("main",null,[y(a),y(r)])}var ct=E(dt,[["render",lt]]);const _t={name:"App",components:{Main:ct},computed:c({},W({test:({base:e})=>e.started}))};function ut(e,t,i,o,s,n){const a=w("Main");return _(),g("div",null,[y(a)])}var pt=E(_t,[["render",ut]]);Ae(pt).use(je).mount("#app");

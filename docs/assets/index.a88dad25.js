var oe=Object.defineProperty,ae=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var N=(e,t,i)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,c=(e,t)=>{for(var i in t||(t={}))de.call(t,i)&&N(e,i,t[i]);if(M)for(var i of M(t))le.call(t,i)&&N(e,i,t[i]);return e},h=(e,t)=>ae(e,re(t));import{v,c as ce,E as _e,a as g,b as E,r as w,o as _,d as u,t as R,n as I,e as P,m as k,f as W,g as ue,F as S,h as $,i as T,w as z,j as me,T as pe,k as he,l as ge,p as fe,q as ve}from"./vendor.8fa25795.js";const we=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}};we();const Ae=()=>({started:"yes"}),Ee={},ye={},xe={};var Ce={actions:ye,mutations:xe,state:Ae,getters:Ee};const O="activate_area",V="move_area",B="deactivate_area",G="resizing_AREA",U="update_list",Z="window_was_resized",J="READJUST_AREAS",q="fold_card",X="update_cards",K="resizing_toggle",L="area_toggle",H="rearrange_area",Q="set_list",Y="resize_area",ee="recalibrate_sizes",te="redistribute_areas",ie="set_card_fold",ne="set_cards",se="set_resizing",be=()=>({resizing:!1,list:[],originalList:[{name:"Area 1",original_position:1,current_position:1,id:1,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!1,cards:[{title:"Card A",content:"Card A",id:v(),fold_status:!1},{title:"Card B",content:"Card B",id:v(),fold_status:!1},{title:"Card C",content:"Card C",id:v(),fold_status:!1}]},{name:"Area 2",original_position:2,current_position:3,id:2,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!1},{name:"Area 3",original_position:3,current_position:3,id:3,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!0},{name:"Area 4",original_position:4,current_position:4,id:4,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!1},{name:"Area 5",original_position:5,current_position:5,id:5,is_active:!1,width:0,pixel_width:0,uid:v(),hasEditor:!1,image:"https://i.imgur.com/GL7igry.png"}],json:""}),$e={},Re={[K]({commit:e},t){e(se,t)},[X]({commit:e},{areaId:t,cards:i}){e(ne,{areaId:t,cards:i})},[q]({commit:e},{areaId:t,id:i,status:o}){e(ie,{areaId:t,id:i,status:o})},[O]({commit:e},t=null){let i=null;return typeof t=="number"?e(L,{areaId:t,show:!0}):i="`areaId` needs to be a number.",i},[B]({commit:e},t=null){let i=null;return typeof t=="number"?e(L,{areaId:t,show:!1}):i="`areaId` needs to be a number.",i},[V]({commit:e},{oldIndex:t,newIndex:i}){e(H,{oldIndex:t,newIndex:i})},[U]({commit:e},t){e(Q,t)},[G]({commit:e},{id:t,sizeDiff:i}){e(Y,{id:t,sizeDiff:i})},[Z]({commit:e}){e(ee)},[J]({commit:e}){e(te)}},Ie=e=>e.map(t=>{const i=window.innerWidth;return t.pixel_width===0&&(t.pixel_width=100),t.width=t.pixel_width/i*100,c({},t)}),A=e=>{let t=e.map(i=>{const{original_position:o,current_position:s,is_active:n,width:a,pixel_width:r,id:d,cards:l=null}=i,x={id:d,original_position:o,current_position:s,is_active:n,width:a,pixel_width:r};return l&&(x.cards=l.map((m,p)=>h(c({},m),{position:p+1}))),x});return t=t.reduce((i,o)=>(i[`area${o.id}`]=o,i),{}),JSON.stringify(t)},Se={[se](e,t){e.resizing=t},[L](e,{areaId:t,show:i}){const{originalList:o,list:s}=e;let n=s;if(i===!0){const r=o.find(m=>m.id===t),l=parseFloat((100/(n.length+1)).toFixed(2)),x=100-l;if(n=n.map(m=>{const p=parseFloat((x*m.width/100).toFixed(2));return h(c({},m),{width:p})}),r.is_active=!0,r.width=l,r.original_position<n.length)n.splice(r.original_position-1,0,r);else{let m=-1;for(let p=0;p<length;p+=1)n[p].original_position>r.original_position&&p>0&&n[p].original_position<n[p-1].original_position&&(m=p);m!==-1?n.splice(m,0,r):n.push(r)}}else{e.originalList=o.map(d=>h(c({},d),{is_active:d.id===t?!1:d.is_active,uid:v()})),n=s.filter(d=>d.id!==t);const r=n.reduce((d,l)=>d+l.width,0);n=n.map(d=>h(c({},d),{width:d.width/r*100}))}const a=window.innerWidth;n=n.map((r,d)=>h(c({},r),{current_position:d+1,pixel_width:a/(100/r.width)})),e.list=n,e.json=A(e.list)},[Y](e,{id:t,sizeDiff:i}){const{list:o}=e,s=o.findIndex(a=>a.id===t);o[s].pixel_width+=i,o[s+1].pixel_width-=i;const n=Ie(o);e.list=n,e.json=A(e.list)},[H](e){const{list:t}=e;e.list=t.map((i,o)=>h(c({},i),{current_position:o+1})),e.json=A(e.list)},[Q](e,t){e.list=t.map((i,o)=>h(c({},i),{current_position:o+1})),e.json=A(e.list)},[ee](e){const t=window.innerWidth;e.list=e.list.map((i,o)=>h(c({},i),{current_position:o+1,pixel_width:t/(100/i.width)})),e.json=A(e.list)},[te](e){const i=parseFloat((100/e.list.length).toFixed(2)),o=window.innerWidth;e.list=e.list.map((s,n)=>h(c({},s),{current_position:n+1,width:i,pixel_width:o/(100/i)})),e.json=A(e.list)},[ie](e,{areaId:t,id:i,status:o}){const s=e.list.findIndex(a=>a.id===t),n=e.list[s].cards.findIndex(a=>a.id===i);e.list[s].cards[n].fold_status=o,e.json=A(e.list)},[ne](e,{areaId:t,cards:i}){const o=e.list.findIndex(s=>s.id===t);e.list[o].cards=i,e.json=A(e.list)}};var Te={state:be,actions:Re,getters:$e,mutations:Se},ze=ce({modules:{base:Ce,areas:Te}}),y=(e,t)=>{const i=e.__vccOpts||e;for(const[o,s]of t)i[o]=s;return i};const Le={name:"TinyEditor",components:{editor:_e}},ke={style:{width:"90%"}};function We(e,t,i,o,s,n){const a=w("editor",!0);return _(),g("div",ke,[E(a,{"api-key":"no-api-key",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |            alignleft aligncenter alignright alignjustify |            bullist numlist outdent indent | removeformat | help"}})])}var je=y(Le,[["render",We]]);const Fe={name:"AreaCard",props:{card:Object},data(){return{collapsed:!1}},methods:{collapse(){this.$emit("fold",{id:this.card.id,status:!this.card.fold_status})}}},De={class:"card"},Me={class:"card__header"},Ne={class:"card__draggable"};function Pe(e,t,i,o,s,n){return _(),g("div",De,[u("div",Me,[u("span",Ne,"\u2630 "+R(i.card.title),1),u("span",{class:"card__fold",onClick:t[0]||(t[0]=(...a)=>n.collapse&&n.collapse(...a))},"\u2193")]),u("div",{class:I(["card__content",i.card.fold_status?"card__content--hide":""])},R(i.card.content),3)])}var Oe=y(Fe,[["render",Pe]]);const Ve={name:"AreaComponent",data(){return{area:null,containerWidth:0,cards:[]}},components:{Editor:je,Card:Oe,draggable:P},props:{element:Object},computed:c({},k({list:({areas:e})=>e.list,resizing:({areas:e})=>e.resizing})),mounted(){this.area=document.getElementById(`area-${this.element.id}`),this.cards=this.element.cards},methods:h(c({},W({deActivateArea:B,resizeArea:G,foldCard:q,updateCards:X,isResizing:K})),{downMouse(e){var t=document.getElementsByClassName("tox-tinymce");for(let f=0;f<t.length;f++)t[f].style.pointerEvents="none";const{target:i,pageX:o}=e;this.isResizing(!0);let s=i.parentElement;const{addEventListener:n,removeEventListener:a}=window;let{offsetWidth:r}=s;const d=this.list[this.list.findIndex(f=>f.id===this.element.id)+1],l=document.getElementById(`area-${d.id}`),x=l.offsetWidth;let m=0;const p=(f,b=0)=>{let C=f+b;const D=x-b;D>100&&C>=100&&(l.style.width=D+"px",m=s.style.width=C+"px")},j=({pageX:f})=>{p(r,f-o)},F=()=>{setTimeout(()=>{this.isResizing(!1);var b=document.getElementsByClassName("tox-tinymce");for(let C=0;C<b.length;C++)b[C].style.pointerEvents="auto"},500);const f=parseFloat(m.replace("px",""));this.resizeArea({id:this.element.id,sizeDiff:f-r}),a("mousemove",j),a("mouseup",F)};n("mousemove",j),n("mouseup",F)},cardsMoved(){this.updateCards({areaId:this.element.id,cards:this.cards})},cardFold({id:e,status:t}){this.foldCard({areaId:this.element.id,id:e,status:t})}})},Be=["id"],Ge=u("div",{class:"area__handle"},[u("i",{class:"icon icon__move"},"\u2725")],-1),Ue={class:"area__close"},Ze=u("hr",null,null,-1),Je=u("hr",null,null,-1),qe=["src"];function Xe(e,t,i,o,s,n){const a=w("Editor"),r=w("Card"),d=w("draggable");return _(),g("div",{class:"area",id:`area-${i.element.id}`,style:me(`width:${i.element.pixel_width}px`)},[u("div",{class:I(["area__header",e.resizing?"no-events":""])},[Ge,u("div",Ue,[u("i",{class:"icon icon__close",onClick:t[0]||(t[0]=l=>e.deActivateArea(i.element.id))},"\xD7")])],2),u("div",{class:I(["area__content",e.resizing?"no-events":""])},[ue(" Area "+R(i.element.id)+" ",1),i.element.hasEditor?(_(),g(S,{key:0},[Ze,E(a)],64)):$("",!0),i.element.image?(_(),g(S,{key:1},[Je,u("img",{class:"area__image",src:i.element.image,alt:"Image"},null,8,qe)],64)):$("",!0),i.element.cards&&i.element.cards.length>0?(_(),T(d,{key:2,onChange:n.cardsMoved,modelValue:s.cards,"onUpdate:modelValue":t[1]||(t[1]=l=>s.cards=l),tag:"transition-group","item-key":"id",handle:".card__draggable"},{item:z(({element:l})=>[(_(),T(r,{onFold:n.cardFold,card:l,key:l.id},null,8,["onFold","card"]))]),_:1},8,["onChange","modelValue"])):$("",!0)],2),e.list.findIndex(l=>l.id===i.element.id)+1!==e.list.length?(_(),g("div",{key:0,class:"area__divider",onMousedown:t[2]||(t[2]=(...l)=>n.downMouse&&n.downMouse(...l))},null,32)):$("",!0)],12,Be)}var Ke=y(Ve,[["render",Xe]]);const He={name:"WindowComponent",data:()=>({}),components:{Area:Ke,draggable:P},created(){window.onresize=this.windowResized},computed:{list:{get(){return this.$store.state.areas.list.filter(e=>e.is_active)},set(e){this.$store.dispatch(U,e)}}},methods:c({},W({moveArea:V,windowResized:Z}))},Qe={class:"window"};function Ye(e,t,i,o,s,n){const a=w("Area"),r=w("draggable");return _(),g("div",Qe,[E(r,{onChange:e.moveArea,handle:".area__handle",modelValue:n.list,"onUpdate:modelValue":t[0]||(t[0]=d=>n.list=d),tag:"transition-group","item-key":"uid"},{item:z(({element:d})=>[E(pe,null,{default:z(()=>[d?(_(),T(a,{key:d.uid,element:d},null,8,["element"])):$("",!0)]),_:2},1024)]),_:1},8,["onChange","modelValue"])])}var et=y(He,[["render",Ye]]);const tt={name:"FooterComponent",methods:h(c({},W({activateArea:O,readjust:J})),{addArea(e){const{target:t}=e,i=t.getAttribute("data-area-id");this.activateArea(parseInt(i,10))}}),computed:c({},k({list:({areas:e})=>e.originalList,jsonText:({areas:e})=>e.json}))},it={class:"footer"},nt=["disabled","data-area-id"];function st(e,t,i,o,s,n){return _(),g("footer",it,[(_(!0),g(S,null,he(e.list,a=>(_(),g("button",{key:a.id,class:I(["footer__btn",a.is_active?"footer__btn--disabled":""]),disabled:a.is_active,onClick:t[0]||(t[0]=(...r)=>n.addArea&&n.addArea(...r)),"data-area-id":a.id}," Add Area "+R(a.id),11,nt))),128)),ge(u("textarea",{readonly:"",name:"config",id:"config",cols:"30",rows:"5","onUpdate:modelValue":t[1]||(t[1]=a=>e.jsonText=a)},`
    `,512),[[fe,e.jsonText]]),u("button",{class:"footer__btn",onClick:t[2]||(t[2]=(...a)=>e.readjust&&e.readjust(...a))},"Adjust Structure")])}var ot=y(tt,[["render",st]]);const at={name:"MainComponent",components:{Window:et,Footer:ot}};function rt(e,t,i,o,s,n){const a=w("Window"),r=w("Footer");return _(),g("main",null,[E(a),E(r)])}var dt=y(at,[["render",rt]]);const lt={name:"App",components:{Main:dt},computed:c({},k({test:({base:e})=>e.started}))};function ct(e,t,i,o,s,n){const a=w("Main");return _(),g("div",null,[E(a)])}var _t=y(lt,[["render",ct]]);ve(_t).use(ze).mount("#app");
